(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(e,n,t){"use strict";function r(e,n){var t=document.createElement("div");return t.classList.add(n),e.appendChild(t),t}function o(e){for(var n=e;n&&!n.classList.contains("file-data");)n=n.parentElement;if(!n)throw"Could not find parent file-data element";return n}t.r(n);t(87),t(169);var i=t(86),a=t(22),s=function(){function e(e,n,t){this.nugget=null,this.data=new Uint8Array(n),this.filename=e,this.unique_id="file-"+t,this.file_data_div=function(e,n,t){var o=(i=t,a="data-area",s=document.getElementById(a),u=document.createElement("div"),u.id=i,s?s.appendChild(u):console.error("Could not find div: "+a),u);var i,a,s,u;o.classList.add("file-container"),r(o,"filename").textContent=e;var d=r(o,"file-data");return r(d,"hex-data").textContent=function(e){for(var n=Array(),t=0;t<e.length-1;t+=2){var r=l(e[t]);r+=l(e[t+1]),n.push(r)}if(t<e.length){var r=l(e[t]);n.push(r)}for(var o=String(),i=0;i<n.length;){var a=0;a=n.length-i>8?i+8:n.length,o+=n.slice(i,a).join(" ")+"\n",i=a}return o}(n),r(d,"ascii-data").textContent=function(e){for(var n=String(),t=0;t<e.length;++t)t>0&&!(t%16)&&(n+="\n"),n+=c(e[t]);return n}(n),d}(this.filename,this.data,this.unique_id),this.apply_schema()}return e.prototype.apply_schema=function(){try{this.nugget=(e=this.filename,n=this.data,t=Date.now(),r=a.n(n),o=Date.now()-t,console.info("Schema applied to "+e+" in "+o/1e3+" seconds"),r),this.nugget&&function e(n,t){n.id=t++;t=n.children.reduce(function(n,t){return e(t,n)},t);return t}(this.nugget,0),this.display_schema()}catch(e){alert(e)}var e,n,t,r,o},e.prototype.display_schema=function(){!function(e,n){for(var t=e.getElementsByClassName("schema"),o=0;o<t.length;++o)t[o].remove();if(n){var i=r(e,"schema"),a=r(i,"schema-minmax");a.innerHTML=function(e){return e.children.reduce(function(e,n){return e+=function e(n){return n.children.length?n.minimised?'<span class="maximise" data-nugget-id="'+n.id+'"><i class="far fa-plus-square"></i></span>\n':n.children.reduce(function(n,t){return n+=e(t)},'<span class="minimise" data-nugget-id="'+n.id+'"><i class="far fa-minus-square"></i></span>\n'):"\n"}(n)},"")}(n);var s=r(i,"schema-data");s.innerHTML=function(e){return e.children.reduce(function(e,n){return e+=function e(n,t){var r=function(e,n){var t=new Array(n+1).join("  ");t+="<span class=schema-nugget data-idx-start="+e.start+" data-idx-len="+e.len+" data-nugget-id="+d+++">",t+=e.name,e.value&&(t+=": "+e.value);return t+"</span>\n"}(n,t);return n.minimised?r:n.children.reduce(function(n,r){return n+=e(r,t+1)},r)}(n,0)},"")}(n),function(e){var n=e.getElementsByClassName("schema-nugget");Array.from(n).forEach(function(e){e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",v)});var t=e.getElementsByClassName("minimise");Array.from(t).forEach(function(e){e.addEventListener("click",m)});var r=e.getElementsByClassName("maximise");Array.from(r).forEach(function(e){e.addEventListener("click",g)})}(e)}}(this.file_data_div,this.nugget)},e}(),u=[];function l(e){var n=e.toString(16);return n.length%2&&(n="0"+n),n}function c(e){return e>=32&&e<=126?String.fromCharCode(e):"."}var d=0;function f(e){var n=e;return"span"!==e.tagName.toLowerCase()&&(n=e.parentElement),n&&"span"!==n.tagName.toLowerCase()&&(n=n.parentElement),n}function m(e){if(e.target instanceof Element){var n=f(e.target);if(n){var t=n.attributes.getNamedItem("data-nugget-id");if(t)h(parseInt(t.value),n,!0);else console.error("data-nugget-id attribute not found")}else console.error("Could not find parent span element")}else console.error("Expected element, got "+e.target)}function g(e){if(e.target instanceof Element){var n=f(e.target);if(n){var t=n.attributes.getNamedItem("data-nugget-id");if(t)h(parseInt(t.value),n,!1);else console.error("data-nugget-id attribute not found")}else console.error("Could not find parent span element")}else console.error("Expected element, got "+e.target)}function h(e,n,t){var r=n.parentElement;if(r&&r.classList.contains("schema-minmax")){var o=r.parentElement;if(o&&o.classList.contains("schema")){var i=o.parentElement;if(i&&i.classList.contains("file-data")){var a=i.parentElement;if(a&&a.classList.contains("file-container")){var s=a.id,l=u.find(function(e){return e.unique_id===s});l?(!function e(n,t,r){if(t.id===n)return void(t.minimised=r);if(t.children.length)for(var o=0;o<t.children.length;++o){if(t.children.id>n)return;o<t.children.length-1&&t.children[o+1].id<n||e(n,t.children[o],r)}}(e,l.nugget,t),l.display_schema()):console.error("Could not find appropriate BinFile object")}else console.error("Could not find file-container div")}else console.error("Could not find file-date div")}else console.error("Could not find schema div")}else console.error("Could not find schema-minmax div")}function v(e){var n=e.target;if(n instanceof Element){var t=o(n.parentElement),r=t.getElementsByClassName("hex-data")[0],i=r.textContent;if(i){r.textContent=i;var a=t.getElementsByClassName("ascii-data")[0],s=a.textContent;s?a.textContent=s:console.error("Cound not get ascii elem text")}else console.error("Cound not get hex elem text")}else console.error("Expected element, got "+n)}function p(e){var n=e.target;if(n instanceof Element){var t=n.attributes.getNamedItem("data-idx-start");if(t){var r=parseInt(t.value),i=n.attributes.getNamedItem("data-idx-len");if(i){var a=parseInt(i.value),s=o(n.parentElement);!function(e,n,t){var r=Math.floor(2*e*1.25),o=Math.floor(2*(e+n)*1.25),i=t.getElementsByClassName("hex-data")[0],a=i.textContent;if(!a)return void console.error("Cound not get hex elem text");var s=a.substring(0,r),u=a.substring(r,o),l=a.substring(o);i.innerHTML=s+'<span class="highlight">'+u+"</span>"+l}(r,a,s),function(e,n,t){var r=Math.floor(1.0625*e),o=Math.floor(1.0625*(e+n)),i=t.getElementsByClassName("ascii-data")[0],a=i.innerHTML;if(!a)return void console.error("Cound not get ascii elem text");var s=a.substring(0,r),u=a.substring(r,o),l=a.substring(o);i.innerHTML=s+'<span class="highlight">'+u+"</span>"+l}(r,a,s)}else console.error("data-idx-len attribute not found")}else console.error("data-idx-start attribute not found")}else console.error("Expected element, got "+n)}function y(e,n){try{var t=Date.now();a.p(e,n);var r=Date.now()-t;console.info("Schema compiled in "+r/1e3+" seconds"),function(){var e=document.getElementById("syntax-results");if(!e)return void console.error("Could not find 'syntax-results' element");e.textContent="Ok",e.classList.remove("syntax-error"),e.classList.add("syntax-ok"),k()}(),u.forEach(function(e){return e.apply_schema()})}catch(e){!function(e){var n,t=document.getElementById("syntax-results");if(!t)return void console.error("Could not find 'syntax-results' element");e.line_no>0?(n="Line "+e.line_no+": "+e.msg,function(e,n){if(!b)return void console.error("No current editor for markers");var t={message:n,severity:i.MarkerSeverity.Error,startLineNumber:e,endLineNumber:e,startColumn:0,endColumn:100},r=b.getModel();if(!r)return void console.error("No current model found for markers");i.editor.setModelMarkers(r,"owner??",[t])}(e.line_no,e.msg)):(n=e.msg,k());t.textContent=n,t.classList.remove("syntax-ok"),t.classList.add("syntax-error")}(e)}}var E,b=null,x="// The root struct encloses the\n// entire file\nstruct root {\n    sample_elem: uint8,\n}";function C(e){i.languages.register({id:"carta"}),i.languages.setMonarchTokensProvider("carta",{keywords:["struct"],typeKeywords:["int8","int16_be","int16_le","int32_be","int32_le","int64_be","int64_le","uint8","uint16_be","uint16_le","uint32_be","uint32_le","uint64_be","uint64_le","f32_be","f32_le","f64_be","f64_le","ascii"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!,;~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment","@push"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]]}}),e||(e=x);var n=document.getElementById("editor-container");n?((b=i.editor.create(n,{value:e,language:"carta",minimap:{enabled:!1},lineNumbers:"on",scrollBeyondLastLine:!1,lineDecorationsWidth:"0ch",lineNumbersMinChars:3})).onDidChangeModelContent(L),y("<unnamed>",e)):console.error("Could not find editor-container")}function w(){b&&b.layout()}function L(e){var n;E&&window.clearTimeout(E),E=window.setTimeout(_,1e3),(n=document.getElementById("syntax-results"))?(n.textContent="checking...",n.classList.remove("syntax-error"),n.classList.remove("syntax-ok")):console.error("Could not find 'syntax-results' element")}function _(){E=null,y("<unnamed>",b?b.getValue():"")}function k(){if(b){var e=b.getModel();e?i.editor.setModelMarkers(e,"owner??",[]):console.error("No current model found for markers")}else console.error("No current editor for markers")}switch(a.o(),document.readyState){case"loading":document.addEventListener("DOMContentLoaded",B);break;case"interactive":case"complete":B();break;default:console.error("Document state unknown")}function B(){!function(){var e=document.getElementById("file-upload");e?e.addEventListener("change",A):console.error("Could not find file upload element");var n=document.getElementById("open-schema-input");n?n.addEventListener("change",T):console.error("Could not find schema file upload input");var t=document.getElementById("new-schema");t?t.addEventListener("click",I):console.error("Could not find new schema button");var r=document.getElementById("open-schema");r?r.addEventListener("click",M):console.error("Could not find open schema button");window.addEventListener("resize",w)}()}function I(){N(null)}function N(e){var n=document.getElementById("new-schema");n&&n.remove();var t=document.getElementById("open-schema");t&&t.remove();var o=document.getElementById("sidebar");if(o){r(o,"editor").id="editor-container";var i=r(o,"schema-status");i.textContent="Syntax: ";var a=document.createElement("span");a.id="syntax-results",i.appendChild(a),C(e)}else console.error("Could not find div with id: 'sidebar'")}function M(){var e=document.getElementById("open-schema-input");e?e.click():console.error("Could not find open schema input")}function A(){var e=document.querySelector("#file-upload").files;if(e){for(var n=function(n){var t=e[n],r=new FileReader;r.onloadend=function(){var e=r.result;!function(e,n){var t=new s(e,n,u.length);u.push(t)}(t.name,e)},r.readAsArrayBuffer(t)},t=0;t<e.length;++t)n(t);var r=document.getElementById("file-upload-area");r&&r.remove()}}function T(){var e=document.getElementById("open-schema-input").files;if(e){if(1!=e.length)return void console.error("Must specify only one file");var n=e[0],t=new FileReader;t.onloadend=function(){N(t.result)},t.readAsText(n)}}n.default=function(){}},167:function(e,n,t){"use strict";var r=t.w[e.i];e.exports=r;t(22);r.j()},22:function(e,n,t){"use strict";t.d(n,"o",function(){return o}),t.d(n,"n",function(){return m}),t.d(n,"p",function(){return v}),t.d(n,"i",function(){return x}),t.d(n,"j",function(){return C}),t.d(n,"k",function(){return w}),t.d(n,"l",function(){return L}),t.d(n,"m",function(){return _}),t.d(n,"a",function(){return k}),t.d(n,"b",function(){return I}),t.d(n,"c",function(){return N}),t.d(n,"g",function(){return M}),t.d(n,"d",function(){return A}),t.d(n,"f",function(){return T}),t.d(n,"h",function(){return S}),t.d(n,"e",function(){return D});var r=t(167);function o(){return r.g()}let i=null;function a(){return null!==i&&i.buffer===r.i.buffer||(i=new Uint8Array(r.i.buffer)),i}let s=0;const u=new Array(32);function l(e){return u[e]}u.fill(void 0),u.push(void 0,null,!0,!1);let c=u.length;function d(e){e<36||(u[e]=c,c=e)}function f(e){const n=l(e);return d(e),n}function m(e){const n=function(e){const n=r.c(1*e.length);return a().set(e,n/1),s=e.length,n}(e),t=s;try{return f(r.e(n,t))}finally{r.a(n,1*t)}}let g,h=new TextEncoder("utf-8");function v(e,n){const t=g(e),o=s,i=g(n),a=s;try{return r.h(t,o,i,a)}finally{r.a(t,1*o),r.a(i,1*a)}}g="function"==typeof h.encodeInto?function(e){let n=e.length,t=r.c(n),o=0;for(;;){const i=a().subarray(t+o,t+n),{read:s,written:u}=h.encodeInto(e,i);if(o+=u,0===(e=e.substring(s)).length)break;t=r.d(t,n,2*n),n*=2}return s=o,t}:function(e){const n=h.encode(e),t=r.c(n.length);return a().set(n,t),s=n.length,t};let p=new TextDecoder("utf-8");function y(e,n){return p.decode(a().subarray(e,e+n))}let E=null;function b(){return null!==E&&E.buffer===r.i.buffer||(E=new Uint32Array(r.i.buffer)),E}function x(e){console.debug(l(e))}function C(e){console.error(l(e))}function w(e){console.info(l(e))}function L(e){console.log(l(e))}function _(e){console.warn(l(e))}function k(e,n){let t=y(e,n);t=t.slice(),r.a(e,1*n),console.error(t)}function B(e){c===u.length&&u.push(u.length+1);const n=c;return c=u[n],u[n]=e,n}function I(){return B(new Error)}function N(e,n){const t=g(l(n).stack),r=s,o=b();o[e/4]=t,o[e/4+1]=r}function M(e,n){return B(y(e,n))}function A(e,n){return B(JSON.parse(y(e,n)))}function T(e){throw f(e)}function S(e,n){throw new Error(y(e,n))}function D(e){d(e)}}}]);